<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Buvette ‚Äì Twirling B√¢ton Trets</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <div class="head">
      <div class="brand">
        <img src="assets/logo-club.png" alt="Logo club" onerror="this.style.display='none'" />
        <div>
          <strong>Twirling B√¢ton Trets</strong><br />
          <span class="muted">Site officiel</span>
        </div>
      </div>
    <nav>
      <a href="index.html">Accueil</a>
      <a href="le-club.html">Le club</a>
      <a href="actualites.html">Actualit√©s</a>
      <a href="galerie.html">Galerie</a>
      <a href="calendrier.html">Calendrier</a>
      <a href="buvette.html">Buvette</a>
      <a href="sponsors.html">Sponsors</a>
      <a href="contact.html">Contact</a>
    </nav>
    </div>
  </header>
  <section class="hero wrap">
    <h1>Buvette ‚Äì Ligue N3 (25‚Äì26 avril 2026)</h1>
    <p class="rule">‚ö†Ô∏è Interdiction de manger dans le gymnase. Seules les bouteilles d‚Äôeau et gourdes sont accept√©es.</p>
  </section>
  <main class="wrap card">
    <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin-bottom:12px">
      <input id="q" type="search" placeholder="Rechercher un article‚Ä¶" aria-label="Rechercher" />
      <select id="filterCat" aria-label="Filtrer par cat√©gorie"></select>
      <button onclick="window.print()">üñ®Ô∏è Imprimer</button>
    </div>
    <div style="overflow:auto">
      <table id="menuTable">
        <thead>
          <tr>
            <th>Article</th>
            <th>Cat√©gorie</th>
            <th>Prix</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
    <p class="note">Pour modifier la carte, √©ditez le fichier <code>menu.json</code>.</p>
  </main>
  <script>
  const el=(s)=>document.querySelector(s);
  const fmt=(p)=> (String(p).includes(',')||String(p).includes('x')) ? (String(p).replace('.', ',') + (String(p).includes('‚Ç¨')?'':' ‚Ç¨')) : (Number(p).toFixed(2).replace('.', ',') + ' ‚Ç¨');
  fetch('menu.json').then(r=>r.json()).then(ITEMS=>{
    const cats=[...new Set(ITEMS.map(i=>i.category))];
    el('#filterCat').innerHTML = '<option value="">Cat√©gorie: toutes</option>' + cats.map(c=>`<option>${c}</option>`).join('');
    function render(){
      const q=(el('#q').value||'').trim().toLowerCase();
      const cat=el('#filterCat').value;
      const rows=ITEMS.filter(i=>!cat||i.category===cat)
        .filter(i=>!q||i.name.toLowerCase().includes(q))
        .map(i=>`<tr><td>${i.name}</td><td><span class=\"pill\">${i.category}</span></td><td class=\"price\">${fmt(i.price)}</td></tr>`).join('');
      el('#menuTable tbody').innerHTML = rows || '<tr><td colspan=\"3\" class=\"muted\">Aucun article‚Ä¶</td></tr>';
    }
    ['#q','#filterCat'].forEach(id=> el(id).addEventListener('input', render));
    render();
  });
  </script>
  <footer class="footer wrap">
    <div>¬© <span id="year"></span> Twirling B√¢ton Trets ‚Ä¢ Site statique simple</div>
  </footer>
  <script>document.querySelectorAll('#year').forEach(n=>n.textContent=new Date().getFullYear());</script>
  <!-- Pop-up buvette auto (01/01/2026 ‚Üí 26/04/2026) -->
  <div id="popup" class="modal" role="dialog" aria-modal="true" aria-labelledby="popTitle">
    <div class="box">
      <h3 id="popTitle">Buvette ‚Äì Ligue N3 (25‚Äì26 avril 2026)</h3>
      <p><strong>Paiements :</strong> esp√®ces & carte (pas de ch√®ques). Retrait via <strong>tickets</strong> (encaissement ‚Üí ticket ‚Üí produit).</p>
      <p class="rule">‚ö†Ô∏è Interdiction de manger dans le gymnase ‚Äî seules bouteilles d‚Äôeau et gourdes sont accept√©es.</p>
      <p><a href="buvette.html">Voir le menu & tarifs</a></p>
      <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:12px">
        <button id="closePopup">Fermer</button>
      </div>
    </div>
  </div>
  <script>
  (function(){ try{ const today=new Date(); const start=new Date('2026-01-01T00:00:00'); const end=new Date('2026-04-26T23:59:59'); const dismissed=localStorage.getItem('popupDismissed2026')==='1'; if(!dismissed && today>=start && today<=end){ document.getElementById('popup').style.display='flex'; } document.getElementById('closePopup').addEventListener('click', function(){ document.getElementById('popup').style.display='none'; localStorage.setItem('popupDismissed2026','1'); }); }catch(e){} })();
  </script>
</body>
</html>
